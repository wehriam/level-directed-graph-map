# LevelDB Directed Graph Map

[![CircleCI](https://circleci.com/gh/wehriam/directed-graph-map.svg?style=svg)](https://circleci.com/gh/wehriam/directed-graph-map) [![npm version](https://badge.fury.io/js/directed-graph-map.svg)](http://badge.fury.io/js/directed-graph-map) [![codecov](https://codecov.io/gh/wehriam/directed-graph-map/branch/master/graph/badge.svg)](https://codecov.io/gh/wehriam/directed-graph-map)

Directed graph data structure [implemented](https://github.com/wehriam/directed-graph-map/blob/master/src/index.js) using LevelDB. Similiar to multi-key maps or bidirectional maps.

```js
const dg = new LevelDirectedGraphMap([], './optional-db-path', {});

const run = async () => {
                              //  A
  await dg.addEdge('A', 'X'); //  ├── X
  await dg.addEdge('A', 'Y'); //  ├── Y
  await dg.addEdge('A', 'Z'); //  └── Z

  await dg.getTargets('A');   //  X, Y, Z

  await dg.size(); // 3
  await dg.edges(); // [['A', 'X'], ['A', 'Y'], ['A', 'Z']]
  await dg.sources(); // ['A']
  await dg.targets(); // ['X', 'Y', 'z']

}

run();

```

## Install

`yarn add level-directed-graph-map`

## Usage

```js
const DirectedGraphMap = require('directed-graph-map');

const dgm = new LevelDirectedGraphMap([['A', 'B']], './optional-db-path', {});

const run = async () => {
  //  A
  //  └── B
  
  await dgm.hasEdge('A', 'B'); // true
  
  await dgm.addEdge('B', 'C');
  
  //  A
  //  └── B
  //      └── C
  
  await  dgm.hasEdge('B', 'C'); // true
  await  dgm.getTargets('A'); // new Set(['B']);
  await  dgm.getTargets('B'); // new Set(['C']);
  await  dgm.getTargets('C'); // new Set();
  await  dgm.getSources('A'); // new Set();
  await  dgm.getSources('B'); // new Set(['A']);
  await  dgm.getSources('C'); // new Set(['B']);
  
  await  dgm.removeSource('A');
  
  //  B
  //  └── C
  
  await dgm.hasEdge('A', 'B'); // false
  await dgm.getTargets('A'); // new Set();
  
  await dgm.removeTarget('C');
  
  //  Empty
  
  await dgm.getTargets('B'); // new Set();
  await dgm.hasEdge('B', 'C'); // false
  
  await dgm.addEdge('A', 'B');
  
  //  A
  //  └── B
  
  await dgm.hasEdge('A', 'B'); // true
  
  await dgm.removeEdge('A', 'B');
  
  //  Empty
  
  await dgm.hasEdge('A', 'B'); // false
}

run();

```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [DirectedGraphMap](#directedgraphmap)
    -   [addEdge](#addedge)
    -   [removeEdge](#removeedge)
    -   [hasEdge](#hasedge)
    -   [removeSource](#removesource)
    -   [removeTarget](#removetarget)
    -   [getSources](#getsources)
    -   [getTargets](#gettargets)
-   [DirectedGraphMap#edges](#directedgraphmapedges)
-   [DirectedGraphMap#size](#directedgraphmapsize)
-   [DirectedGraphMap#sources](#directedgraphmapsources)
-   [DirectedGraphMap#targets](#directedgraphmaptargets)

### DirectedGraphMap

Class representing a Directed Graph Map

**Parameters**

-   `edges` **Iterable&lt;\[S, T]>**  (optional, default `[]`)

#### addEdge

Add an edge to the graph map.

**Parameters**

-   `source` **S** Source of the edge
-   `target` **T** Target of the edge

Returns **void** 

#### removeEdge

Remove an edge from the graph map.

**Parameters**

-   `source` **S** Source of the edge
-   `target` **T** Target of the edge

Returns **void** 

#### hasEdge

Test if a edge exists in the graph map.

**Parameters**

-   `source` **S** Source of the edge
-   `target` **T** Target of the edge

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** Whether the edge exists in the graph map.

#### removeSource

Remove all edges from a source.

**Parameters**

-   `source` **S** Source of the edge

Returns **void** 

#### removeTarget

Remove all edges to a target.

**Parameters**

-   `target` **T** Target of the edge

Returns **void** 

#### getSources

Get all sources with edges to a target.

**Parameters**

-   `target` **T** Target of the edge

Returns **[Set](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Set)&lt;S>** Set of sources

#### getTargets

Get all targets with edges from a source.

**Parameters**

-   `source` **S** Source of the edge

Returns **[Set](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Set)&lt;T>** Set of targets

### DirectedGraphMap#edges

Array of edges

### DirectedGraphMap#size

Edge count

### DirectedGraphMap#sources

Set of sources

### DirectedGraphMap#targets

Set of targets
